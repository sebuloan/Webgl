<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>WebGL Project Home</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <style>
      /* Ensure the body and html elements take up the full viewport */
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
      }

      /* Make the iframe fill the entire screen */
      iframe {
        border: none; /* Remove the iframe border */
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <!-- The Unity WebGL build embedded as an iframe -->
    <iframe id="unityIframe" src="https://sebuloan.github.io/Webgl/index.html"></iframe>

    <script>
      // Define the updated JSON structure
      const jsonData = {
        components: [
          { id: 1, name: "Component A", type: "Sensor" }
        ],
        connectors: [
          { id: 1, from: "Component A", to: "Component B", type: "Wired" }
        ],
        systems: [
          { id: 1, name: "System X", components: [1], connectors: [1] }
        ]
      };

      // Function to send message to Unity when the page loads
      window.onload = function() {
        const iframe = document.getElementById('unityIframe');
        iframe.contentWindow.postMessage({ type: 'initializeSystem', data: jsonData }, '*');
      };

      // Listen for messages from Unity
      window.addEventListener('message', function(event) {
        const message = event.data;
        // Handle Unity's request to change button color or any other logic
        if (message.type === 'UnityReady') {
          console.log("Unity is ready to start:", message);
        }
      });
    </script>
  </body>
</html>
